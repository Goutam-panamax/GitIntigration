<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:mobifin="http://mobifin.io/schema/bpmn" id="sample-diagram_17558400207631014" targetNamespace="http://bpmn.io/schema/bpmn" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd">
  <bpmn2:process id="Process_1_17558400207639788" isExecutable="false">
    <bpmn2:extensionElements />
    <bpmn2:startEvent id="STARTEVENT_Event_0fxeyvh_17501337536130853_17501660881132_17558400207630791" name="Start" UID="STARTEVENT" BlockCategory="1" Task_Name="Start Event">
      <bpmn2:outgoing>Flow_0hwi3vo_17558400207631877</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:endEvent id="ENDEVENT_Event_0xxy5i8_17501337536130853_17501660881364_17558400207631542" name="End" UID="ENDEVENT" BlockCategory="1" Task_Name="End Event">
      <bpmn2:incoming>Flow_0uo32ez_17558400207631924</bpmn2:incoming>
      <bpmn2:incoming>Flow_08fv90s_17558400207635015</bpmn2:incoming>
    </bpmn2:endEvent>
    <mobifin:serviceTask id="SENDRESPONSE_Activity_0ou88za_17558400207636332" name="Success Response" UID="SENDRESPONSE" BlockCategory="1" Task_Name="Send Response" RESPONSEDATA_SENDRESPONSE="{TransactionId:RESPONSE.paymentBlock.output.transaction_id},{SubTransactionId:RESPONSE.paymentBlock.output.sub_transaction_id}" RESPONSECODE_SENDRESPONSE="1" RESPONSECODE_SENDRESPONSE_DISPLAY="1" RESPONSEMESSAGE_SENDRESPONSE="Load Balance Successful" RESPONSEMESSAGE_SENDRESPONSE_DISPLAY="Load Balance Successful" Description="Success Response">
      <bpmn2:incoming>Flow_093ov93_17501337536130853_175016608818313_17558400207631203</bpmn2:incoming>
      <bpmn2:outgoing>Flow_0uo32ez_17558400207631924</bpmn2:outgoing>
    </mobifin:serviceTask>
    <bpmn2:sequenceFlow id="Flow_0uo32ez_17558400207631924" sourceRef="SENDRESPONSE_Activity_0ou88za_17558400207636332" targetRef="ENDEVENT_Event_0xxy5i8_17501337536130853_17501660881364_17558400207631542" />
    <mobifin:serviceTask id="PROCESSPAYMENT_Activity_06vlz24_17558400207637988" name="Payment" UID="PROCESSPAYMENT" BlockCategory="1" Task_Name="Process Payment" OUTPUTPERSISTKEY_PROCESSPAYMENT="paymentBlock" AMOUNT_PROCESSPAYMENT="TAPESTRYREQUEST.Amount" AMOUNT_PROCESSPAYMENT_DISPLAY="TAPESTRYREQUEST.Amount" DEBITFROM_PROCESSPAYMENT="TAPESTRYREQUEST.UserIdentifier" DEBITFROM_PROCESSPAYMENT_DISPLAY="TAPESTRYREQUEST.UserIdentifier" SOURCEBALANCE_PROCESSPAYMENT="EMONEY_1281_414" DESTINATIONBALANCE_PROCESSPAYMENT="EMONEY_1281_414" CREDITTO_PROCESSPAYMENT="TAPESTRYREQUEST.TrustAccountIdentifier" CREDITTO_PROCESSPAYMENT_DISPLAY="TAPESTRYREQUEST.TrustAccountIdentifier" Description="Payment">
      <bpmn2:incoming>Flow_0hwi3vo_17558400207631877</bpmn2:incoming>
      <bpmn2:outgoing>Flow_0taas9i_17558400207630598</bpmn2:outgoing>
    </mobifin:serviceTask>
    <bpmn2:sequenceFlow id="Flow_0hwi3vo_17558400207631877" sourceRef="STARTEVENT_Event_0fxeyvh_17501337536130853_17501660881132_17558400207630791" targetRef="PROCESSPAYMENT_Activity_06vlz24_17558400207637988" UID="SEQUENCEFLOW" BlockCategory="1" Task_Name="Sequence Flow" />
    <bpmn2:exclusiveGateway id="RULE_Gateway_08cpfhn_17558400207637671" UID="RULE" BlockCategory="1" Task_Name="Rule">
      <bpmn2:incoming>Flow_0taas9i_17558400207630598</bpmn2:incoming>
      <bpmn2:outgoing>Flow_093ov93_17501337536130853_175016608818313_17558400207631203</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_1bqxm30_17501337536130853_175016608820615_17558400207639240</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <mobifin:serviceTask id="SENDRESPONSE_Activity_0vea2dh_17558400207636883" name="Fail Response" UID="SENDRESPONSE" BlockCategory="1" Task_Name="Send Response" RESPONSEDATA_SENDRESPONSE="" Description="Fail Response" RESPONSECODE_SENDRESPONSE="-1" RESPONSECODE_SENDRESPONSE_DISPLAY="-1" RESPONSEMESSAGE_SENDRESPONSE="Load Balance Failed" RESPONSEMESSAGE_SENDRESPONSE_DISPLAY="Load Balance Failed">
      <bpmn2:incoming>Flow_1bqxm30_17501337536130853_175016608820615_17558400207639240</bpmn2:incoming>
      <bpmn2:outgoing>Flow_08fv90s_17558400207635015</bpmn2:outgoing>
    </mobifin:serviceTask>
    <bpmn2:sequenceFlow id="Flow_0taas9i_17558400207630598" sourceRef="PROCESSPAYMENT_Activity_06vlz24_17558400207637988" targetRef="RULE_Gateway_08cpfhn_17558400207637671" UID="SEQUENCEFLOW" BlockCategory="1" Task_Name="Sequence Flow" />
    <bpmn2:sequenceFlow id="Flow_093ov93_17501337536130853_175016608818313_17558400207631203" name="Success" sourceRef="RULE_Gateway_08cpfhn_17558400207637671" targetRef="SENDRESPONSE_Activity_0ou88za_17558400207636332" UID="SEQUENCEFLOW" BlockCategory="1" Task_Name="Sequence Flow" PARAMETER_SEQUENCEFLOW="RESPONSE.paymentBlock.response_code" PARAMETER_SEQUENCEFLOW_DISPLAY="BLOCKOUTPUT.paymentBlock.response_code" OPERATOR_SEQUENCEFLOW="&#62;" VALUE_SEQUENCEFLOW="0" VALUE_SEQUENCEFLOW_DISPLAY="0" Description="Success" />
    <bpmn2:sequenceFlow id="Flow_1bqxm30_17501337536130853_175016608820615_17558400207639240" name="Fail" sourceRef="RULE_Gateway_08cpfhn_17558400207637671" targetRef="SENDRESPONSE_Activity_0vea2dh_17558400207636883" UID="SEQUENCEFLOW" BlockCategory="1" Task_Name="Sequence Flow" PARAMETER_SEQUENCEFLOW="RESPONSE.paymentBlock.response_code" PARAMETER_SEQUENCEFLOW_DISPLAY="BLOCKOUTPUT.paymentBlock.response_code" OPERATOR_SEQUENCEFLOW="&#60;" VALUE_SEQUENCEFLOW="0" VALUE_SEQUENCEFLOW_DISPLAY="0" Description="Fail" />
    <bpmn2:sequenceFlow id="Flow_08fv90s_17558400207635015" sourceRef="SENDRESPONSE_Activity_0vea2dh_17558400207636883" targetRef="ENDEVENT_Event_0xxy5i8_17501337536130853_17501660881364_17558400207631542" UID="SEQUENCEFLOW" BlockCategory="1" Task_Name="Sequence Flow" />
  <bpmn:extensionElements>
    <mobifin:collection>
      <name>Default</name>
        <mobifin:workflow>
      <name>Withdraw Balance</name>
      <description>Withdraw Balance</description>
      <apiMethod>ADAPTER_POST</apiMethod>
      <mobifin:workflowInputParams>
        <parameter name="UserIdentifier" defaultValue="" isMandatory="1" validationMessage="Enter a valid UserIdentifier" regularExpression="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"/>
        <parameter name="TrustAccountIdentifier" defaultValue="" isMandatory="1" validationMessage="Enter a valid Trust account" regularExpression="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"/>
        <parameter name="Amount" defaultValue="" isMandatory="1" validationMessage="Enter a valid Amount" regularExpression="^(?:\+?\d+(?:\.\d+)?|\+?\.\d+)$"/>
      </mobifin:workflowInputParams>
    </mobifin:workflow>
  </mobifin:collection>
</bpmn:extensionElements>
</bpmn2:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1_17558400207639919">
    <bpmndi:BPMNPlane id="BPMNPlane_1_17558400207638564" bpmnElement="Process_1_17558400207639788">
      <bpmndi:BPMNShape id="Event_0fxeyvh_di_17558400207639976" bpmnElement="STARTEVENT_Event_0fxeyvh_17501337536130853_17501660881132_17558400207630791">
        <dc:Bounds x="155" y="265" width="150" height="150" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="217" y="415" width="26" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0xxy5i8_di_17558400207632056" bpmnElement="ENDEVENT_Event_0xxy5i8_17501337536130853_17501660881364_17558400207631542">
        <dc:Bounds x="1545" y="275" width="150" height="150" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1610" y="425" width="21" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0ou88za_di_17558400207632534" bpmnElement="SENDRESPONSE_Activity_0ou88za_17558400207636332">
        <dc:Bounds x="1160" y="50" width="300" height="200" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_06vlz24_di_17558400207633838" bpmnElement="PROCESSPAYMENT_Activity_06vlz24_17558400207637988">
        <dc:Bounds x="360" y="270" width="300" height="200" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_08cpfhn_di_17558400207635682" bpmnElement="RULE_Gateway_08cpfhn_17558400207637671" isMarkerVisible="true">
        <dc:Bounds x="910" y="290" width="120" height="120" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0vea2dh_di_17558400207631895" bpmnElement="SENDRESPONSE_Activity_0vea2dh_17558400207636883">
        <dc:Bounds x="1180" y="480" width="300" height="200" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0uo32ez_di_17558400207630482" bpmnElement="Flow_0uo32ez_17558400207631924">
        <di:waypoint x="1460" y="150" />
        <di:waypoint x="1510" y="150" />
        <di:waypoint x="1510" y="350" />
        <di:waypoint x="1545" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0hwi3vo_di_17558400207639377" bpmnElement="Flow_0hwi3vo_17558400207631877">
        <di:waypoint x="305" y="340" />
        <di:waypoint x="333" y="340" />
        <di:waypoint x="333" y="370" />
        <di:waypoint x="360" y="370" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0taas9i_di_17558400207636192" bpmnElement="Flow_0taas9i_17558400207630598">
        <di:waypoint x="660" y="380" />
        <di:waypoint x="785" y="380" />
        <di:waypoint x="785" y="350" />
        <di:waypoint x="910" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_093ov93_di_17558400207633416" bpmnElement="Flow_093ov93_17501337536130853_175016608818313_17558400207631203">
        <di:waypoint x="970" y="290" />
        <di:waypoint x="970" y="150" />
        <di:waypoint x="1160" y="150" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="964" y="217" width="45" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1bqxm30_di_17558400207634914" bpmnElement="Flow_1bqxm30_17501337536130853_175016608820615_17558400207639240">
        <di:waypoint x="970" y="410" />
        <di:waypoint x="970" y="580" />
        <di:waypoint x="1180" y="580" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="976" y="492" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_08fv90s_di_17558400207638017" bpmnElement="Flow_08fv90s_17558400207635015">
        <di:waypoint x="1480" y="580" />
        <di:waypoint x="1513" y="580" />
        <di:waypoint x="1513" y="350" />
        <di:waypoint x="1545" y="350" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn2:definitions>
